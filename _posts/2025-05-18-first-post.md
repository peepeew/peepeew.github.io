---
layout: post
title:  "peepeew的flask第一个安全项目总结"
date:   2025-05-17 20:00:00 +1000
categories: flask 项目 安全
---

你好！我是 **peepeew**，欢迎来到我的技术博客主页 🎉  
这是我用 Flask 完成的第一个安全开发项目，包含认证、权限管理、防爆破、防刷登录等基本能力。

👉 项目地址：[Secure User System](https://github.com/peepeew/secure-user-system)

---

## ⚠️ 潜在安全问题分析

### 1. 明文密码存储
- **风险**：一旦数据库被泄露，攻击者可以直接获得所有用户的密码。
- **原因**：注册时密码未加密直接入库。

### 2. 登录爆破攻击
- **风险**：攻击者可无限尝试密码，暴力猜解。
- **原因**：系统未限制登录失败次数。

### 3. 权限缺失 / 越权访问
- **风险**：普通用户可访问管理员接口。
- **原因**：无用户身份校验和角色验证。

### 4. 会话管理不安全
- **风险**：Cookie 被盗即可冒充用户。
- **原因**：没有使用安全认证机制。

### 5. 缺乏日志记录和审计
- **风险**：攻击行为无法追踪。
- **原因**：没有记录登录行为。

---

## ✅ 安全设计与实现原理

### 1. **密码哈希存储（bcrypt）**
- 加盐哈希用户密码，防止数据库泄露造成直接风险。

### 2. **登录失败限制机制**
- 使用内存字典记录失败次数，超 5 次锁定 5 分钟，有效防止爆破。

### 3. **JWT 登录认证机制**
- 登录成功生成 token，token 中包含 `username` 和 `role`，用于鉴权。

### 4. **权限校验与接口保护**
- 管理员接口检查 `token` 中 `role == admin` 才可访问。

### 5. **登录日志记录（含成功/失败）**
- 每次登录行为记录到数据库，支持导出 CSV 与趋势图可视化。

### 6. **接口健康探针 `/api/status`**
- 提供系统状态检测点，用于 ZAP 或 CI 自动扫描。

---


## 🔜 后续扩展计划

- ✍️ 脱敏模块设计（字段权限控制）
- 🚀 SafeCore-Go 项目重构为 Go 中间件
- 🧪 ZAP 自动化扫描集成 + 安全报告输出
- 📘 编写安全开发相关博客文档

---

📫 **欢迎关注我的 GitHub 博客，期待与你交流！**

